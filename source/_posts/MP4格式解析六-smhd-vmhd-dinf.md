title: MP4格式解析六 smhd/vmhd/dinf
author: Cyrus
tags:
  - MP4
categories:
  - 音视频
date: 2019-08-15 23:37:00
---
### 一、smhd(Sound Media Header Box)
![](smhd_1.png)
看数据：
~~~
00 00 00 10 73 6D 68 64 00 00 00 00 00 00 00 00 ; ....smhd........

==================  解析  ===================
00 00 00 10: size 16
73 6D 68 64: smhd
00 00 00 00: version flag都是0
00 00 ： balance 一个16位整数，指定此声音媒体的声音平衡。声音平衡是控制计算机两个扬声器之间混音的设置。该字段通常设置为0。平衡值表示为16位定点数，范围从-1.0到+1.0。高阶8位包含值的整数部分;低8位包含小数部分。负值使平衡器向左扬声器加权;正值强调正确的渠道。将天平设置为0对应于中性设置。
00 00 : 保留
~~~

### 二、vmhd(Video Media Header Box)
![](vmhd_1.png)
看数据:
~~~
00 00 00 14 76 6D 68 64 00 00 00 01 00 00 00 00 ; ....vmhd........
00 00 00 00                                     ; ....

==================  解析  ===================
00 00 00 14: size 20
76 6D 68 64: vmhd
00 00 00 01: version = 0,  flag 默认1
00 00: Graphics mode 0,直接拷贝原始图片
00 00 00 00 00 00：Opcolor 三个16位值，用于指定图形模式字段中指示的传输模式操作的红色，绿色和蓝色。
~~~
![](vmhd_2.png)

### 三、dinf(Data Information Box)
![](dinf_1.png)
看数据:
~~~
00 00 00 24 64 69 6E 66 00 00 00 1C 64 72 65 66 ; ...$dinf....dref
00 00 00 00 00 00 00 01 00 00 00 0C 75 72 6C 20 ; ............url 
00 00 00 01                                     ; ....

==================  解析  ===================
00 00 00 24: size 36
64 69 6E 66: dinf
00 00 00 1C: size 28
64 72 65 66: dref
00 00 00 00: version flag 均为0
00 00 00 01：Entry count 1
00 00 00 0C 75 72 6C 20 00 00 00 01： entry data
~~~

entry结构图：
![](dinf_2.png)
数据：
~~~
00 00 00 0C 75 72 6C 20 00 00 00 01

==================  解析  ===================
00 00 00 0C： size 12
75 72 6C 20: type 'url '
00 00 00 01: version 0, flag 1
~~~

entry type类型说明：
![](dinf_3.png)
